<section class="push-detail-page">
    <div class="inner">
        <h2 class="main-title">푸시 발송 상세</h2>
        <div class="list-common-btn-wrap clearfix">
            <div class="btn-wrap">
                <a class="list-btn" href="/push/lists">목록</a>
                <a class="update-btn" href="/push/update">수정</a>
            </div>
        </div>
        <div class="wrap">
            <ul class="enrollment clearfix">
                <li class="push-type">
                    <p class="sub-title important">발송유형(*)</p>
                    <p class="detail-data">즉시발송</p>
                </li>
                <li class="push-send-date">
                    <p class="sub-title important">발송일자</p>
                    <p class="detail-data">2020/02/20 10:30:01</p>
                </li>
                <li class="clearfix">
                    <p class="sub-title important">구분 (*)</p>
                    <p class="detail-data">일반공지</p>
                </li>
                <li>
                    <p class="sub-title important">제목(*)</p>
                    <p class="detail-data">일반공지입니다.</p>
                </li>
                <li>
                    <p class="sub-title important">내용(*)</p>
                    <p class="detail-data">일반공지입니다. 일반공지입니다. 일반공지입니다.</p>
                </li>
                <li class="clearfix">
                    <p class="sub-title important">이미지</p>
                    <p class="detail-data-img"><img src="/assets/images/test.png" alt="push image"></p>
                </li>
                <li>
                    <p class="sub-title important">발송대상(*)</p>
                    <p class="detail-data">
                        새콤달콤, berry, 라이언
                    </p>

                </li>
            </ul>
        </div>
    </div>
</section>

<script>

    // modal event
    $('.more-infor-btn').click(function () {
        $('.modal-layout').fadeIn();
        $('.modal-content').fadeIn();
    });
    $('.close-btn').click(function () {
        $('.modal-layout').fadeOut();
        $('.modal-content').fadeOut();
    });
    $('.modal-layout').click(function () {
        $('.modal-layout').fadeOut();
        $('.modal-content').fadeOut();
    });

    // input flie 변환
    $(document).ready(function(){
        var fileTarget = $('.filebox .upload-hidden');

        fileTarget.on('change', function(){
            if(window.FileReader){
                var filename = $(this)[0].files[0].name;
            } else {
                var filename = $(this).val().split('/').pop().split('\\').pop();
            }
            $(this).siblings('.upload-name').val(filename);
        });
    });


    // input preview image
    var imgTarget = $('.preview-image .upload-hidden');

    imgTarget.on('change', function(){
        var parent = $(this).parent();
        parent.children('.upload-display').remove();

        if(window.FileReader){
            //image 파일만
            if (!$(this)[0].files[0].type.match(/image\//)) return;

            var reader = new FileReader();
            reader.onload = function(e){
                var src = e.target.result;
                parent.prepend('<div class="upload-display"><div class="upload-thumb-wrap"><img src="'+src+'" class="upload-thumb"></div></div>');
            }
            reader.readAsDataURL($(this)[0].files[0]);
        }
        else {
            $(this)[0].select();
            $(this)[0].blur();
            var imgSrc = document.selection.createRange().text;
            parent.prepend('<div class="upload-display"><div class="upload-thumb-wrap"><img class="upload-thumb"></div></div>');

            var img = $(this).siblings('.upload-display').find('img');
            img[0].style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enable='true',sizingMethod='scale',src=\""+imgSrc+"\")";
        }
    });

    // 발송 유형
    $('.type-btn').on("click", function () {
        var valueCheck = $('.type-btn:checked').val();

        if ( valueCheck == 'typeNow' ) {
            $('.push-send-date').hide();
        }else if(valueCheck == 'typeReserv') {
            $('.push-send-date').show();
        }
    });

    // 푸시 대상
    $('.obj-btn').on("click", function () {
        var valueCheck = $('.obj-btn:checked').val();

        if ( valueCheck == 'objAll' ) {
            $('.nickname-wrap').hide();
            $('.group-wrap').hide();
        }else if(valueCheck == 'objPart') {
            $('.nickname-wrap').show();
            $('.group-wrap').hide();
        }else if(valueCheck == 'objGroup') {
        $('.nickname-wrap').hide();
        $('.group-wrap').show();
        }
    });

</script>